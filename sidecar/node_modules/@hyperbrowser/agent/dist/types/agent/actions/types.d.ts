import { Page } from "playwright-core";
import { A11yDOMState } from "@hyperbrowser/agent/dist/context-providers/a11y-dom/types";
import { HyperAgentLLM } from "@hyperbrowser/agent/dist/llm/types";
import { z } from "zod";
import { MCPClient } from "@hyperbrowser/agent/dist/agent/mcp/client";
import { HyperVariable } from "@hyperbrowser/agent/dist/types/agent/types";
import type { FrameContextManager } from "@hyperbrowser/agent/dist/cdp";
export interface ActionContext {
    page: Page;
    domState: A11yDOMState;
    llm: HyperAgentLLM;
    tokenLimit: number;
    variables: HyperVariable[];
    debugDir?: string;
    mcpClient?: MCPClient;
    debug?: boolean;
    cdpActions?: boolean;
    invalidateDomCache: () => void;
    cdp?: {
        resolveElement: typeof import("@hyperbrowser/agent/dist/cdp").resolveElement;
        dispatchCDPAction: typeof import("@hyperbrowser/agent/dist/cdp").dispatchCDPAction;
        client: import("@hyperbrowser/agent/dist/cdp").CDPClient;
        preferScriptBoundingBox?: boolean;
        frameContextManager?: FrameContextManager;
        debug?: boolean;
    };
}
export interface ActionOutput {
    success: boolean;
    message: string;
    extract?: object;
    debug?: any;
}
export type ActionSchemaType = z.ZodObject<{
    type: z.ZodLiteral<string>;
    params: z.ZodObject<any>;
}>;
export type ActionType = z.infer<ActionSchemaType>;
export interface AgentActionDefinition<T extends z.ZodType<any> = z.ZodType<any>> {
    readonly type: string;
    readonly toolName?: string;
    readonly toolDescription?: string;
    actionParams: T;
    run(ctx: ActionContext, params: z.infer<T>): Promise<ActionOutput>;
    /**
     * completeAction is only called if the name of this action is "complete". It is meant to format text into a proper format for output.
     * @param params
     */
    completeAction?(params: z.infer<T>): Promise<string>;
    pprintAction?(params: z.infer<T>): string;
}
